#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ pre-commit hook

echo "üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pre-commit hook –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
if [ ! -d ".git" ]; then
    echo "‚ùå –û–®–ò–ë–ö–ê: –ù–µ –Ω–∞–π–¥–µ–Ω .git –∫–∞—Ç–∞–ª–æ–≥. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ –∫–æ—Ä–Ω—è git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è."
    exit 1
fi

# –°–æ–∑–¥–∞–µ–º .git/hooks –∫–∞—Ç–∞–ª–æ–≥ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
mkdir -p .git/hooks

# –ö–æ–ø–∏—Ä—É–µ–º pre-commit hook
cp scripts/pre-commit-hook.sh .git/hooks/pre-commit
chmod +x .git/hooks/pre-commit

echo "‚úÖ Pre-commit hook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!"
echo ""
echo "üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç hook:"
echo "   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤ ARCHITECTURE.md –∏ ARCHITECTURE_RULES.md"
echo "   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç, –µ—Å–ª–∏ –∫–æ–¥ –∏–∑–º–µ–Ω–µ–Ω, –Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∞"
echo "   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Markdown (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω markdownlint)"
echo "   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"
echo "   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –∫–ª–∞—Å—Å–∞—Ö, –Ω–µ –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"
echo ""
echo "üîß –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ markdownlint (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):"
echo "   npm install -g markdownlint-cli"
echo ""
echo "üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º: ARCHITECTURE_RULES.md"
